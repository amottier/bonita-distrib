<?xml version='1.0' encoding='utf-8'?>
<Context>

	<!--  To not persist the session after reboot tomcat -->
	<Manager pathname="" />
	
  <Listener className="org.bonitasoft.tomcat.atomikos.ContextLifecycleListener" webappName="bonita" />

  <!-- H2 Example -->
  <Resource
    name="bonitaDS"
    auth="Container"
    type="com.atomikos.jdbc.AtomikosDataSourceBean"
    factory="org.bonitasoft.tomcat.atomikos.AtomikosTomcatFactoryFactory"
    uniqueResourceName="jdbc/bonitaDSXA"
    xaDataSourceClassName="org.h2.jdbcx.JdbcDataSource"
    xaProperties.user="sa"
    xaProperties.password=""
    xaProperties.URL="jdbc:h2:tcp://localhost:9091/bonita_journal.db;MVCC=TRUE;DB_CLOSE_ON_EXIT=TRUE;IGNORECASE=TRUE;"
    minPoolSize="1"
    maxPoolSize="50"
    testQuery="SELECT 1"/>


    <!-- H2 Example -->
	<Resource name="bonitaSequenceManagerDS"  
    auth="Container"  
    type="javax.sql.DataSource" 
    maxActive="17"  
    minIdle="5"  
    maxWait="10000"  
    initialSize="3" 
    validationQuery="SELECT 1"
    validationInterval="30000"
    removeAbandoned="true" 
    logAbandoned="true" 
    username="sa" 
    password=""
    driverClassName="org.h2.Driver" 
    url="jdbc:h2:tcp://localhost:9091/bonita_journal.db;MVCC=TRUE;DB_CLOSE_ON_EXIT=TRUE;IGNORECASE=TRUE;"/>


  <!-- MySQL Example -->
<!--

  <Resource
    name="bonitaDS"
    auth="Container"
    type="com.atomikos.jdbc.AtomikosDataSourceBean"
    factory="org.bonitasoft.tomcat.atomikos.AtomikosTomcatFactoryFactory"
    uniqueResourceName="jdbc/bonitaDSXA"
    xaDataSourceClassName="com.mysql.jdbc.jdbc2.optional.MysqlXADataSource"
    xaProperties.user="bonita"
    xaProperties.password="bpm"
    xaProperties.URL="jdbc:mysql://localhost:3306/bonita?dontTrackOpenResources=true&useUnicode=true&characterEncoding=UTF-8"
    minPoolSize="1"
    maxPoolSize="50"
    testQuery="SELECT 1/>

  <Resource name="bonitaSequenceManagerDS"  
    auth="Container"  
    type="javax.sql.DataSource" 
    maxActive="17"  
    minIdle="5"  
    maxWait="10000"  
    initialSize="3" 
    maxPoolSize="15" 
    minPoolSize="3"
    maxConnectionAge="0"
    maxIdleTime="1800"
    maxIdleTimeExcessConnections="120"
    idleConnectionTestPeriod="30"
    acquireIncrement="3"
    validationQuery="SELECT 1"
    validationInterval="30000"
    testConnectionOnCheckout="true"
    removeAbandoned="true" 
    logAbandoned="true" 
    username="bonita" 
    password="bpm"
    driverClassName="com.mysql.jdbc.Driver" 
    url="jdbc:mysql://localhost:3306/bonita?dontTrackOpenResources=true&amp;useUnicode=true&amp;characterEncoding=UTF-8"/>
-->

  <!-- Oracle Example -->
<!--

  <Resource
    name="bonitaDS"
    auth="Container"
    type="com.atomikos.jdbc.AtomikosDataSourceBean"
    factory="org.bonitasoft.tomcat.atomikos.AtomikosTomcatFactoryFactory"
    uniqueResourceName="jdbc/bonitaDSXA"
    xaDataSourceClassName="oracle.jdbc.xa.client.OracleXADataSource"
    xaProperties.user="bonita"
    xaProperties.password="bpm"
    xaProperties.URL="jdbc:oracle:thin:@localhost:1521:XE"
    minPoolSize="1"
    maxPoolSize="50"
    testQuery="SELECT 1 FROM DUAL/>

  <Resource name="bonitaSequenceManagerDS"  
    auth="Container"  
    type="javax.sql.DataSource" 
    maxActive="17"  
    minIdle="5"  
    maxWait="10000"  
    initialSize="3" 
    validationQuery="SELECT 1 FROM dual"
    validationInterval="30000"
    removeAbandoned="true" 
    logAbandoned="true" 
    username="bonita" 
    password="bpm"
    driverClassName="oracle.jdbc.OracleDriver" 
    url="jdbc:oracle:thin:@localhost:1521:XE"/>
-->

  <!-- Postgresql Example -->
<!--
  <Resource
    name="bonitaDS"
    auth="Container"
    type="com.atomikos.jdbc.AtomikosDataSourceBean"
    factory="org.bonitasoft.tomcat.atomikos.AtomikosTomcatFactoryFactory"
    uniqueResourceName="jdbc/bonitaDSXA"
    xaDataSourceClassName="org.postgresql.xa.PGXADataSource"
    xaProperties.user="bonita"
    xaProperties.password="bpm"
    xaProperties.URL="jdbc:postgresql://localhost:5432/bonita"
    minPoolSize="1"
    maxPoolSize="50"
    testQuery="SELECT 1/>

  <Resource name="bonitaSequenceManagerDS"  
    auth="Container"  
    type="javax.sql.DataSource" 
    maxActive="17"  
    minIdle="5"  
    maxWait="10000"  
    initialSize="3" 
    validationQuery="SELECT 1"
    validationInterval="30000"
    removeAbandoned="true" 
    logAbandoned="true" 
    username="bonita" 
    password="bpm"
    driverClassName="org.postgresql.Driver" 
    url="jdbc:postgresql://localhost:5432/bonita"/>
-->

  <!-- SQL Server Example -->
<!--
  <Resource
    name="bonitaDS"
    auth="Container"
    type="com.atomikos.jdbc.AtomikosDataSourceBean"
    factory="org.bonitasoft.tomcat.atomikos.AtomikosTomcatFactoryFactory"
    uniqueResourceName="jdbc/bonitaDSXA"
    xaDataSourceClassName="com.microsoft.sqlserver.jdbc.SQLServerXADataSource"
    xaProperties.user="bonita"
    xaProperties.password="bpm"
    xaProperties.URL="jdbc:sqlserver://localhost:1433;database=journal"
    minPoolSize="1"
    maxPoolSize="50"
    testQuery="SELECT 1/>
  
  <Resource name="bonitaSequenceManagerDS"  
    auth="Container"  
    type="javax.sql.DataSource" 
    maxActive="17"  
    minIdle="5"  
    maxWait="10000"  
    initialSize="3" 
    validationQuery="SELECT 1"
    validationInterval="30000"
    removeAbandoned="true" 
    logAbandoned="true" 
    username="bonita" 
    password="bpm"
    driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver" 
    url="jdbc:sqlserver://localhost:1433;database=journal"/>
-->

</Context>
